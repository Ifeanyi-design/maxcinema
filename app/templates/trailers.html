{% extends "base.html" %}

{% block content %}
    

    <section id="Merger" class="flex flex-col lg:flex-row gap-3 mx-2 xl:mx-0 my-2">
        <section id="RecentlyAdded" class="my-2 lg:my-5 mx-auto flex flex-col justify-center lg:w-5/6">
            <div class="w-full bg-[#830506] flex items-center justify-center px-4 py-1 md:py-3 text-center">
                <i class="fa-solid fa-bolt" style="vertical-align: middle; font-size: large;"></i>
                <h2 class="font-bold text-white text-[100%] md:text-[130%]">All Trailers</h2>
            </div>
            

            <!-- Telegram CTA box -->
            <div id="telegramCta" class="mt-4">
                <div class="flex items-center justify-between p-4 rounded-lg shadow-md" style="background-color:#0088cc;">
                    <div class="flex items-center gap-3">
                        <i class="fa-brands fa-telegram-plane text-white text-2xl" aria-hidden="true"></i>
                        <div>
                            <p class="text-white font-semibold">Join our Telegram group</p>
                            <p class="text-white text-sm opacity-90">Get updates, trailers and new releases</p>
                        </div>
                    </div>
                        <a href="#" id="telegramJoinBtn" class="inline-block bg-white text-[#0088cc] font-semibold px-4 py-2 rounded-md hover:opacity-95">JOIN OUR TELEGRAM GROUP</a>
                </div>
            </div>
            <div id="RecentlyAddedbox" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 py-2 md:py-4">
                {% for trailer in videos.items %}
                    <div class="relative flex flex-col boxescard trailerBox trailersAll rounded-md overflow-hidden dark:border-gray-500"
                    onclick="window.location.href='{{ url_for("main.detail", det="trailer_watch", name=trailer.slug, id=trailer.id) }}'">
                        <!-- Image wrapper -->
                        <div class="w-full aspect-[1.5/2] relative">
                            <img 
                            src="{{ trailer.image }}"
                            alt="{{trailer.name}} Poster"
                            class="absolute inset-0 w-full h-full object-cover"
                            >
                            <div class="absolute z-30 bg-black flex left-4 bottom-4 text-[8px] lg:text-[12px] p-1 justify-center items-center">
                                <p class="text-white ml-1">Trailers</p>
                            </div>
                        </div>
                        
                        <!-- Content container -->
                        <div class="flex flex-col justify-between flex-grow">
                            <!-- Info -->
                            <div id="recentBoxinfo" class="flex justify-between px-2 py-1 text-[#830506] text-sm dark:text-gray-400">
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-calendar-alt"></i>
                                    <p class="truncate">{{trailer.date_added.strftime('%b %d, %Y')}}</p>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-comment"></i>
                                    <p>{{ trailer.total_comment }}</p>
                                </div>
                                
                            </div>

                            <!-- Title -->
                            <div id="recentBoxtitle" class="text-black text-center p-2.5 font-semibold text-sm md:text-base dark:text-white">
                            <h3 class="line-clamp-2 leading-snug">{{ trailer.name }}</h3>
                            </div>

                            <div id="trailerBoxtype" class="w-fit rounded-md mx-auto mb-2 text-black text-center p-1 font-semibold text-sm md:text-base">
                            <h3>RD: {{ trailer.release_date.strftime('%b %d, %Y') if trailer.release_date else 'N/A' }}</h3>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                
                
            </div>
            <div class="flex justify-center gap-2 pt-3">
                {% include 'pagnation.html'%}
            </div>
        </section>
        <section id="TrendingCol" class="hidden lg:flex flex-col lg:w-1/3 gap-6"> 
            <div class="w-full">
                {% include 'ads/sidebar.html' %}
            </div>         

            <section id="Trailers" class="flex flex-col w-full bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden">
                <div class="w-full bg-[#830506] flex items-center justify-center px-4 py-3 shadow-sm">
                    <h2 class="font-extrabold text-white text-base flex items-center gap-2 italic uppercase">
                        <i class="fa-solid fa-circle-play"></i> Trailers
                    </h2>
                </div>

                <div class="flex flex-col p-2 gap-2">
                    {% for trailer in trending_trailers %}
                        <div class="group flex flex-row items-center bg-gray-50 hover:bg-gray-100 rounded-md overflow-hidden h-20 transition-all cursor-pointer border border-transparent hover:border-gray-200" 
                            onclick="window.location.href='{{ url_for('main.detail', det='trailer_watch', name=trailer.slug, id=trailer.id) }}'">
                            
                            <div class="flex-shrink-0 w-24 h-full overflow-hidden">
                                <div style="background-image: url('{{ trailer.image }}');"
                                    class="w-full h-full bg-center bg-cover transition-transform duration-500 group-hover:scale-110">
                                </div>
                            </div>

                            <div class="flex flex-col justify-center px-3 overflow-hidden">
                                <h3 class="text-gray-900 line-clamp-2 font-bold text-xs leading-tight group-hover:text-[#830506] transition-colors">
                                    {{ trailer.name }}
                                </h3>
                                <div class="flex items-center gap-1 mt-1 text-[10px] text-gray-500 font-semibold italic">
                                    <i class="fas fa-calendar-alt text-[#830506]"></i>
                                    <span>{{ trailer.date_added.strftime('%b %d, %Y') }}</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>

                <div class="p-2 border-t border-gray-50">
                    <a href="{{ url_for('main.trailer') }}" class="flex items-center justify-center gap-2 text-[11px] font-extrabold text-[#830506] hover:underline uppercase py-1">
                        View All Trailers <i class="fa-solid fa-circle-arrow-right text-lg"></i>
                    </a>
                </div>
            </section>
        </section>

    </section>


        

{% endblock %}