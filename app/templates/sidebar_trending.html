<div class="w-full">
    {% include 'ads/sidebar.html' %}
</div>
{% set categories = [
                {'id': 'TrendingMovies', 'title': 'Trending Movies', 'icon': 'fa-fire', 'data': trending_movie, 'type': 'movie'},
                {'id': 'TrendingSeries', 'title': 'Trending Series', 'icon': 'fa-fire', 'data': trending_series, 'type': 'series'},
                {'id': 'Trailers', 'title': 'New Trailers', 'icon': 'fa-play-circle', 'data': trending_trailers, 'type': 'trailer'}
            ] %}

            {% for cat in categories %}
                <section id="{{ cat.id }}" class="flex flex-col w-full bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden">
                    <div class="w-full bg-[#830506] flex items-center justify-center px-4 py-2">
                        <h2 class="font-bold text-white text-sm md:text-base uppercase flex items-center gap-2 tracking-wide">
                            <i class="fa-solid {{ cat.icon }}"></i> {{ cat.title }}
                        </h2>
                    </div>

                    <div class="flex flex-col p-2 gap-2">
                        {% for item in cat.data %}
                        <div onclick="window.location.href='{% if cat.type == 'trailer' %}{{ url_for('main.detail', det='trailer_watch', name=item.slug, id=item.id) }}{% else %}{{ url_for('main.detail', det=item.type, name=item.name, id=item.id, season='1', episode='1') }}{% endif %}'" 
                            class="group flex flex-row items-center bg-gray-50 hover:bg-gray-100 rounded-md overflow-hidden h-20 md:h-24 lg:h-20 transition-all cursor-pointer border border-transparent hover:border-gray-200">
                            
                            <div class="flex-shrink-0 w-20 h-full overflow-hidden">
                                <div style="background-image: url('{{ item.image }}');"
                                    class="w-full h-full bg-center bg-cover transition-transform duration-500 group-hover:scale-110">
                                </div>
                            </div>

                            <div class="flex flex-col justify-center px-3 overflow-hidden">
                                <h3 class="text-gray-900 text-xs md:text-sm font-bold line-clamp-2 leading-tight group-hover:text-[#830506] transition-colors">
                                    {{ item.name }}
                                </h3>
                                <div class="flex items-center gap-2 mt-1 text-[10px] text-gray-500 font-semibold italic">
                                    <i class="fas fa-calendar-alt text-[#830506]"></i>
                                    <span>{{ (item.updated_at or item.date_added).strftime('%b %d, %Y') }}</span>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="p-2 border-t border-gray-50">
                        <a href="{% if cat.type == 'trailer' %}{{ url_for('main.trailer') }}{% else %}{{ url_for('main.trending', type=cat.type) }}{% endif %}" 
                        class="flex items-center justify-center gap-2 text-[11px] font-extrabold text-[#830506] hover:underline uppercase py-1">
                            View All {{ cat.title }} <i class="fa-solid fa-circle-arrow-right"></i>
                        </a>
                    </div>
                </section>
            {% endfor %}