<!DOCTYPE html>
<html lang="en" class="md:scroll-smooth overflow-x-hidden">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block social_tags %}
        <meta property="og:title" content="MaxCinema - Watch Movies Online">
        <meta property="og:description" content="Stream and download your favorite movies.">
        
        <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/2503/2503508.png">
        
        <meta property="og:url" content="{{ request.url }}">
        <meta name="twitter:card" content="summary_large_image">
    {% endblock %}
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2503/2503508.png" type="image/png">
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/2503/2503508.png" type="image/png">

    <script src="https://kit.fontawesome.com/a3231bc2d5.js" crossorigin="anonymous"></script>
    {% block style %}
    
    {% endblock %}
</head>

<body id="BodyTop" class="relative overflow-x-hidden bg-gray-100 scroll-mt-20 {% if dark %} dark:bg-[#0a0a0a] {% endif %} xl:pb-7">
    
    {% if not dark %}
        {%include "header.html"%}
    {% else %}
        {% include "darkheader.html" %}
    {% endif %}

    <div class="w-full xl:w-[85%] xl:max-w-[1600px] mx-auto bg-white min-h-screen 
                xl:border-x-2 xl:border-[#830506] xl:shadow-2xl 
                {% if dark %} dark:bg-[#0a0a0a] overflow-hidden dark:border-gray-800 {% endif %} xl:rounded-b-lg">

        <div style="height: var(--header-height, 80px);" class="w-full md:-mb-28 transition-all duration-300"></div>

        <main class="w-full px-4 sm:px-4 xl:px-8 max-w-7xl mx-auto">
            
            <section class="mt-4 xl:-mt-12 px-0 md:px-12 xl:px-24">
                {% include 'ads/banner.html' %}
            </section>
            
            {% block content %}
            {% endblock %}
        </main>
        
        {%include "footer.html"%}
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/trending.js') }}"></script>
    <script src="{{ url_for('static', filename='js/comment.js') }}"></script>
    
    
    <script>
        function setHeaderPadding() {
            const header = document.getElementById("header");
            if (header) {
                const h = header.offsetHeight;
                document.documentElement.style.setProperty("--header-height", h + "px");
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            setHeaderPadding();
            setTimeout(setHeaderPadding, 100); 
        });

        window.addEventListener("resize", setHeaderPadding);
    </script>
<script>
    let searchTimeout = null;

    function fetchSuggestions(inputId, resultBoxId) {
        const input = document.getElementById(inputId);
        const box = document.getElementById(resultBoxId);
        const query = input.value.trim();

        // 1. Clear timer (debouncing)
        clearTimeout(searchTimeout);

        // 2. If empty, hide box
        if (query.length < 2) {
            box.innerHTML = "";
            box.classList.add('hidden');
            return;
        }

        // 3. Wait 300ms then fetch
        searchTimeout = setTimeout(() => {
            fetch(`/live_search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    box.innerHTML = ""; // Clear old results

                    if (data.length > 0) {
                        box.classList.remove('hidden'); // Show box

                        data.forEach(movie => {
                            // Create the link container
                            const link = document.createElement('a');
                            link.href = movie.url;
                            link.className = "flex items-center p-3 hover:bg-gray-100 border-b border-gray-100 transition duration-150";

                            // Inject HTML (Image + Title + Year)
                            link.innerHTML = `
                                <img src="${movie.image}" alt="${movie.name}" class="w-10 h-14 object-cover rounded shadow-sm mr-3">
                                <div class="flex flex-col text-left">
                                    <span class="text-sm font-bold text-gray-800 leading-tight">${movie.name}</span>
                                    <span class="text-xs text-gray-500 mt-1">${movie.year}</span>
                                </div>
                            `;
                            box.appendChild(link);
                        });
                    } else {
                        box.classList.add('hidden'); // Hide if no matches
                    }
                })
                .catch(err => console.error("Live Search Error:", err));
        }, 300);
    }

    // Optional: Close search box when clicking outside
    document.addEventListener('click', function(e) {
        const desktopBox = document.getElementById('desktopSuggestions');
        const mobileBox = document.getElementById('mobileSuggestions');
        
        // If click is NOT inside desktop search form, hide results
        if (!document.getElementById('desktopSearch').contains(e.target)) {
            desktopBox.classList.add('hidden');
        }
        // If click is NOT inside mobile search form, hide results
        if (!document.getElementById('MobileSearch').contains(e.target)) {
            mobileBox.classList.add('hidden');
        }
    });
</script>


    {% block script %}
    {% endblock %}
    {% include 'ads/popunder.html' %}
    <script src="https://pl28314200.effectivegatecpm.com/81/d2/13/81d2132d6afc8317fc42e3a20b663e83.js"></script>
</body>
</html>