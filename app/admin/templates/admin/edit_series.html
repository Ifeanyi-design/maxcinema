{% extends "admin/base.html" %}
{% block content %}
<div class="p-8 bg-gray-900 text-white min-h-screen">
  <h1 class="text-3xl font-bold mb-6">Edit Series â€” {{ video.name }}</h1>

  <form method="POST" action="{{ url_for('admin.edit_series', series_id=series.id) }}">
    <label class="block text-gray-300 mb-2">Series Name</label>
    <input type="text" name="name" value="{{ video.name }}" class="w-full mb-4 p-2 rounded bg-gray-800 text-white" required>

    <label class="block text-gray-300 mb-2">Slug</label>
    <input type="text" name="slug" value="{{ video.slug or '' }}" class="w-full mb-4 p-2 rounded bg-gray-800 text-white">

    <label class="block text-gray-300 mb-2">Description</label>
    <textarea name="description" class="w-full mb-4 p-2 rounded bg-gray-800 text-white">{{ video.description or '' }}</textarea>

    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label class="block text-gray-300 mb-2">Year Produced</label>
        <input type="number" name="year_produced" value="{{ video.year_produced or '' }}" class="w-full p-2 rounded bg-gray-800 text-white">
      </div>
      <div>
        <label class="block text-gray-300 mb-2">Rating</label>
        <input type="number" name="rating" value="{{ video.rating or '' }}" step="0.1" min="0" max="10" class="w-full p-2 rounded bg-gray-800 text-white">
      </div>
    </div>

    <label class="block text-gray-300 mb-2">Star Cast</label>
    <textarea name="star_cast" class="w-full mb-4 p-2 rounded bg-gray-800 text-white">{{ video.star_cast or '' }}</textarea>

    <div class="flex gap-4 mb-4">
      <label>Seasons
        <input type="number" name="num_seasons" value="{{ series.num_seasons or 0 }}" class="ml-2 p-2 rounded bg-gray-800 text-white">
      </label>
      <label>Episodes
        <input type="number" name="num_episodes" value="{{ series.num_episodes or 0 }}" class="ml-2 p-2 rounded bg-gray-800 text-white">
      </label>
    </div>

    <label class="block text-gray-300 mb-2">Genres</label>
    <div class="flex flex-wrap gap-2 mb-4">
      {% for genre in genres %}
        <label class="inline-flex items-center">
          <input type="checkbox" name="genres" value="{{ genre.id }}" class="mr-2" {% if genre in video.genres %}checked{% endif %}>
          {{ genre.name }}
        </label>
      {% endfor %}
    </div>

    <label class="block text-gray-300 mb-2">Storage Server</label>
    <select name="storage_server_id" class="w-full mb-4 p-2 rounded bg-gray-800 text-white">
      <option value="">-- Select server (optional) --</option>
      {% for server in storage_servers %}
        <option value="{{ server.id }}" {% if video.storage_server_id == server.id %}selected{% endif %}>{{ server.name }}</option>
      {% endfor %}
    </select>

    <label class="block text-gray-300 mb-2">Video Qualities (JSON)</label>
    <textarea name="video_qualities" class="w-full mb-4 p-2 rounded bg-gray-800 text-white" rows="6">{{ video.video_qualities|tojson if video.video_qualities else '' }}</textarea>

    <div class="flex gap-6 mb-4">
      <label class="inline-flex items-center"><input type="checkbox" name="featured" {% if video.featured %}checked{% endif %} class="mr-2"> Featured</label>
      <label class="inline-flex items-center"><input type="checkbox" name="trending" {% if video.trending %}checked{% endif %} class="mr-2"> Trending</label>
      <label class="inline-flex items-center"><input type="checkbox" name="active" {% if video.active %}checked{% endif %} class="mr-2"> Active</label>
    </div>

    <button type="submit" class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded">Save Changes</button>
  </form>
</div>
{% endblock %}
