<!DOCTYPE html>
<html>
<head>
    <title>Admin Area</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block head %}{% endblock %}
    
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .backdrop-transition { transition: opacity 0.3s ease-in-out, visibility 0.3s; }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div class="lg:container mx-auto p-4">
        {% block content %}{% endblock %}
    </div>
    {% block scripts %}{% endblock %}
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const backdrop = document.getElementById('backdrop');
            const openBtn = document.getElementById('openSidebar');
            const closeBtn = document.getElementById('closeSidebar');

            function toggleSidebar() {
                if (!sidebar || !backdrop) return;
                
                // Toggle the -translate-x-full class
                // On mobile, this class hides the sidebar. Removing it shows it.
                sidebar.classList.toggle('-translate-x-full');
                
                // Handle Backdrop Visibility
                if (backdrop.classList.contains('opacity-0')) {
                    backdrop.classList.remove('invisible', 'opacity-0');
                    backdrop.classList.add('opacity-100');
                } else {
                    backdrop.classList.add('opacity-0');
                    backdrop.classList.remove('opacity-100');
                    // Wait for fade out transition before hiding completely
                    setTimeout(() => backdrop.classList.add('invisible'), 300);
                }
            }

            // Close sidebar when clicking a link on mobile
            // Optional: nice for UX
            const navLinks = sidebar.querySelectorAll('a');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    // Only close if we are on mobile (check if sidebar is fixed)
                    if (window.innerWidth < 768) { 
                        toggleSidebar();
                    }
                });
            });

            if (openBtn) openBtn.addEventListener('click', toggleSidebar);
            if (closeBtn) closeBtn.addEventListener('click', toggleSidebar);
            if (backdrop) backdrop.addEventListener('click', toggleSidebar);
        });
    </script>
</body>
</html>
