{% extends "admin/base.html" %}
{% block content %}
    <div class="flex flex-col lg:flex-row items-center w-full">
        <div class="w-[100%] px-10 flex flex-row lg:flex-col gap-2">
            {% if prev == "dashboard" %}
                <button class="bg-blue-800 text-white rounded-lg w-[150px] h-[50px]" onclick="window.location.href='{{ url_for('admin.dashboard') }}'">
                    Go back
                </button>
            {% elif prev == "series" %}
                <button class="bg-blue-800 text-white rounded-lg w-[150px] h-[50px]" onclick="window.location.href='{{ url_for('admin.view_series_specific', prev=prev, name=season.series.all_video.slug, id=season.series.all_video.id) }}'">
                    Go back
                </button>
            {% elif prev == "movie" %}
                <button class="bg-blue-800 text-white rounded-lg w-[150px] h-[50px]" onclick="window.location.href='{{ url_for('admin.view_movies') }}'">
                    Go back
                </button>
            {% endif %}
            <button class="bg-blue-800 text-white rounded-lg w-[150px] h-[50px] flex items-center" onclick="window.location.href='{{ url_for('admin.dashboard') }}'">
                <svg class="w-5 h-5 ml-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-4H9v4a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9z"/>
                </svg>
                Dashboard
            </button>
        </div>
        <h1 class="text-center font-bold w-full px-5 py-3 text-2xl lg:text-5xl">{{ season.series.all_video.name }}</h1>
    </div>
    <div class="bg-white w-full border mt-5">
        <h2 class="text-blue-900 text-center font-bold text-4xl">Season {{ season.season_number }}</h2>
    </div>
    <div class="border-2 border-gray-700 mt-5 grid grid-cols-1 gap-5">
        {% for episode in season.episodes if season and season.episodes %}
            <div class="flex w-full">
                <img class="episode-list-img w-[20%] aspect-square" src="{% if season.image %} {{ season.image }} {% else %} {{season.series.all_video.image}}{% endif %} " alt="{{ season.series.all_video.slug }}">
                <div class="flex flex-col w-[80%] border-2 border-gray-700 relative">
                    <div class="p-3 flex justify-evenly border-b-2 border-gray-700 w-[100%] flex-shrink-0">
                        <p class="text-lg"><b class="mr-2 text-2xl">Title:</b>{{episode.name}}</p>
                        <p class="text-lg"><b class="mr-2 text-2xl">Episode:</b>{{ episode.episode_number }}</p>
                        <p class="text-lg"><b class="mr-2 text-2xl">Length:</b>{{ episode.length }}</p>
                    </div>
                    <div class="p-3 text-wrap md:text-base flex-shrink-0">
                        {{ episode.description }}
                    </div>
                    <div class="flex bottom-0 absolute w-full justify-evenly pb-4">
                        <a href="{{ url_for('admin.edit_episode', name=season.series.all_video.slug, prev='series', series_id=season.series.all_video.id, season_id=season.id, episode_id = episode.id) }}" class="bg-yellow-500 hover:bg-yellow-600 hover:text-white text-white px-5 py-3 rounded-full text-sm text-center">Edit Episode</a>
                        <form method="POST" action="{{ url_for('admin.delete_episode', prev='series', name=season.series.all_video.slug, id=season.series.all_video.id, season_id=season.id, episode_id=episode.id) }}" onsubmit="return confirm('Are you sure you want to delete this season?');">
                            <button type="submit" class="bg-red-500 hover:bg-red-600 hover:text-white text-white px-5 py-3 rounded-full text-sm text-center">Delete Episode</button>
                        </form>
                    </div>
                </div>
            </div>
        {% else %}
            <h2 class="font-bold text-gray-900 text-center">
                No episodes available
            </h2>
        {% endfor %}
    </div>
{% endblock %}